---
interface Props {
  title: string;
  author: string;
  description?: string;
  url?: string;
  year?: string;
  cover?: string;
}

const { title, author, description, url, year, cover } = Astro.props;
---

<article class="book-card">
  <div class="book-cover">
    {cover ? (
      <img src={cover} alt={title} loading="lazy" />
    ) : (
      <div class="book-placeholder">
        <span class="placeholder-icon">ðŸ“–</span>
      </div>
    )}
  </div>
  <div class="book-content">
    <h3 class="book-title">
      {url ? (
        <a href={url} target="_blank" rel="noopener noreferrer">{title}</a>
      ) : (
        title
      )}
    </h3>
    <p class="book-author">{author}{year && ` (${year})`}</p>
    {description && <p class="book-description">{description}</p>}
  </div>
</article>

<style>
  .book-card {
    border: var(--border);
    display: flex;
    flex-direction: column;
    transition: background-color 0.2s;
  }

  .book-card:hover {
    background-color: rgba(255, 255, 255, 0.05);
  }

  .book-cover {
    width: 100%;
    aspect-ratio: 2 / 3;
    overflow: hidden;
    border-bottom: var(--border);
  }

  .book-cover img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: grayscale(100%) contrast(1.1);
  }

  .book-placeholder {
    width: 100%;
    height: 100%;
    background: var(--bg);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .placeholder-icon {
    font-size: 3rem;
    opacity: 0.3;
  }

  .book-content {
    padding: var(--spacing-md);
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .book-title {
    font-size: 1rem;
    margin: 0;
  }

  .book-title a {
    text-decoration: none;
  }

  .book-title a:hover {
    text-decoration: underline;
  }

  .book-author {
    font-size: 0.875rem;
    opacity: 0.7;
    margin: 0;
  }

  .book-description {
    font-size: 0.875rem;
    opacity: 0.5;
    margin: var(--spacing-sm) 0 0 0;
  }
</style>
