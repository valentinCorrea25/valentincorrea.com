---
interface Props {
  title: string;
  platform: string;
  description?: string;
  url?: string;
  year?: string;
  cover?: string;
}

const { title, platform, description, url, year, cover } = Astro.props;
---

<article class="game-card">
  <div class="game-cover">
    {cover ? (
      <img src={cover} alt={title} loading="lazy" />
    ) : (
      <div class="game-placeholder">
        <span class="placeholder-icon">ðŸŽ®</span>
      </div>
    )}
  </div>
  <div class="game-content">
    <h3 class="game-title">
      {url ? (
        <a href={url} target="_blank" rel="noopener noreferrer">{title}</a>
      ) : (
        title
      )}
    </h3>
    <p class="game-platform">{platform}{year && ` (${year})`}</p>
    {description && <p class="game-description">{description}</p>}
  </div>
</article>

<style>
  .game-card {
    border: var(--border);
    display: flex;
    flex-direction: column;
    transition: background-color 0.2s;
    max-width: 100%;
    overflow: hidden;
    height: 100%;
  }

  .game-card:hover {
    background-color: rgba(255, 255, 255, 0.05);
  }

  .game-cover {
    width: 100%;
    aspect-ratio: 3 / 4;
    overflow: hidden;
    border-bottom: var(--border);
    flex-shrink: 0;
    position: relative;
    background: var(--bg);
  }

  .game-cover img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center top;
    filter: grayscale(100%) contrast(1.1);
  }

  .game-placeholder {
    width: 100%;
    height: 100%;
    background: var(--bg);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .placeholder-icon {
    font-size: 3rem;
    opacity: 0.3;
  }

  .game-content {
    padding: var(--spacing-md);
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    flex: 1;
  }

  .game-title {
    font-size: 1rem;
    margin: 0;
  }

  .game-title a {
    text-decoration: none;
  }

  .game-title a:hover {
    text-decoration: underline;
  }

  .game-platform {
    font-size: 0.875rem;
    opacity: 0.7;
    margin: 0;
  }

  .game-description {
    font-size: 0.875rem;
    opacity: 0.5;
    margin: var(--spacing-sm) 0 0 0;
  }
</style>

